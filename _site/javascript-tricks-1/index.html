<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>忘れがちで便利なJavascriptまとめ – Who are we ?</title> <meta name="description" content=""> <meta name="keywords" content="javascript"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="https://sunoko.github.io/whoarewe/assets/img/logo.png"> <meta name="twitter:title" content="忘れがちで便利なJavascriptまとめ"> <meta name="twitter:description" content="空の配列を反復処理するvar arrayは長さが3の空の配列であり、Arrayメソッドで反復処理ができない。var array1はundefinedに設定された値を3つ持つ配列。値を持つので反復処理可能。書き方を変えるならばArray(undefined, undefined, undefined)これと同じ。"> <meta name="twitter:site" content="@username"> <meta name="twitter:creator" content="@username"> <!-- Open Graph --> <meta property="og:locale" content="ja_JP"> <meta property="og:type" content="article"> <meta property="og:title" content="忘れがちで便利なJavascriptまとめ"> <meta property="og:description" content="空の配列を反復処理するvar arrayは長さが3の空の配列であり、Arrayメソッドで反復処理ができない。var array1はundefinedに設定された値を3つ持つ配列。値を持つので反復処理可能。書き方を変えるならばArray(undefined, undefined, undefined)これと同じ。"> <meta property="og:url" content="https://sunoko.github.io/whoarewe/javascript-tricks-1/"> <meta property="og:site_name" content="Who are we ?"> <meta property="og:image" content="https://sunoko.github.io/whoarewe/assets/img/logo.png"> <link rel="canonical" href="https://sunoko.github.io/whoarewe/javascript-tricks-1/"> <link href="https://sunoko.github.io/whoarewe/feed.xml" type="application/atom+xml" rel="alternate" title="Who are we ? Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="https://sunoko.github.io/whoarewe/assets/css/main.css"> <!-- JS --> <script src="https://sunoko.github.io/whoarewe/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="https://sunoko.github.io/whoarewe/favicon.png"> <link rel="shortcut icon" href="https://sunoko.github.io/whoarewe/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(https://sunoko.github.io/whoarewe/assets/img/back.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-98711363-1', 'auto'); ga('send', 'pageview'); </script> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="https://sunoko.github.io/whoarewe/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="https://sunoko.github.io/whoarewe/assets/img/logo.png" alt="Who are we ? photo" class="author-photo"> <h4>Who are we ?</h4> <p>Who are we?</p> </li> <li><a href="https://sunoko.github.io/whoarewe/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://facebook.com/username" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-facebook-square"></i> Facebook</a> </li> <li> <a href="http://github.com/sunoko" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="https://sunoko.github.io/whoarewe/posts/">All Posts</a></li> <li><a href="https://sunoko.github.io/whoarewe/tags/">All Tags</a></li> </ul> </li> <li><a href="https://sunoko.github.io/whoarewe/projects/">Projects</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>忘れがちで便利なJavascriptまとめ</h1> <h4>08 May 2017</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~2 minutes </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="https://sunoko.github.io/whoarewe/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h2 id="空の配列を反復処理する">空の配列を反復処理する</h2> <p><code class="highlighter-rouge">var array</code>は長さが3の空の配列であり、Arrayメソッドで反復処理ができない。 <code class="highlighter-rouge">var array1</code>はundefinedに設定された値を3つ持つ配列。値を持つので反復処理可能。 書き方を変えるならば<code class="highlighter-rouge">Array(undefined, undefined, undefined)</code>これと同じ。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="c1">// [undefined, undefined, undefined]</span>

<span class="nx">array</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">index</span><span class="p">);</span>
<span class="c1">// [undefined, undefined, undefined]</span>

<span class="kd">var</span> <span class="nx">array1</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">3</span><span class="p">));</span>
<span class="c1">// [undefined, undefined, undefined]</span>

<span class="nx">array1</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">index</span><span class="p">);</span>
<span class="c1">// [0, 1, 2]</span>
</code></pre></div> <h2 id="空のパラメーターをメソッドに渡す方法3つ">空のパラメーターをメソッドに渡す方法3つ</h2> <p><code class="highlighter-rouge">null</code>, <code class="highlighter-rouge">undefined</code>, Restパラメータを使用する。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Method</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">Method</span><span class="p">(</span><span class="s1">'val1'</span><span class="p">,</span> <span class="p">,</span> <span class="s1">'val3'</span><span class="p">);</span>
<span class="c1">// Uncaught SyntaxError: Unexpected token</span>

<span class="nx">Method</span><span class="p">(</span><span class="s1">'val1'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">'val3'</span><span class="p">)</span>
<span class="c1">// val1nullval3</span>

<span class="nx">Method</span><span class="p">(</span><span class="s1">'val1'</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="s1">'val3'</span><span class="p">);</span>
<span class="c1">// val1undefinedval3</span>

<span class="nx">Method</span><span class="p">(...[</span><span class="s1">'va1'</span><span class="p">,</span> <span class="p">,</span> <span class="s1">'val3'</span><span class="p">]);</span>
<span class="c1">// val1undefinedval3</span>
</code></pre></div> <h2 id="値が重複しない配列を作る方法">値が重複しない配列を作る方法</h2> <p>Setオブジェクトを使う。Setオブジェクトは各値が一意でなければならない。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[...</span><span class="k">new</span> <span class="nx">Set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])];</span>
<span class="c1">// [1, 2, 3]</span>
<span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
<span class="c1">// true</span>
</code></pre></div> <h2 id="でbooleanに変換する">
<code class="highlighter-rouge">!!</code>でbooleanに変換する</h2> <p><code class="highlighter-rouge">!!(変数名)</code>で変数に値が入っている時は<code class="highlighter-rouge">true</code>を返す。 値が入っていない時は<code class="highlighter-rouge">false</code>を返す。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Account</span><span class="p">(</span><span class="nx">cash</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">this</span><span class="p">.</span><span class="nx">cash</span> <span class="o">=</span> <span class="nx">cash</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hasMoney</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">cash</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">account</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Account</span><span class="p">(</span><span class="mf">100.50</span><span class="p">);</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">account</span><span class="p">.</span><span class="nx">cash</span><span class="p">);</span> 
<span class="c1">// 100.50  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">account</span><span class="p">.</span><span class="nx">hasMoney</span><span class="p">);</span> 
<span class="c1">// true</span>

<span class="kd">var</span> <span class="nx">emptyAccount</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Account</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">emptyAccount</span><span class="p">.</span><span class="nx">cash</span><span class="p">);</span> 
<span class="c1">// 0  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">emptyAccount</span><span class="p">.</span><span class="nx">hasMoney</span><span class="p">);</span> 
<span class="c1">// false  </span>
</code></pre></div> <h2 id="でnumberに変換する">
<code class="highlighter-rouge">+</code>でnumberに変換する</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">toNumber</span><span class="p">(</span><span class="nx">strNumber</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">return</span> <span class="o">+</span><span class="nx">strNumber</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">toNumber</span><span class="p">(</span><span class="s2">"1234"</span><span class="p">));</span> 
<span class="c1">// 1234  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">toNumber</span><span class="p">(</span><span class="s2">"ACB"</span><span class="p">));</span> 
<span class="c1">// NaN  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">())</span> 
<span class="c1">// 1461288164385  </span>
</code></pre></div> <h2 id="でif文を省略する">
<code class="highlighter-rouge">&amp;&amp;</code>でif文を省略する</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">conected</span><span class="p">)</span> <span class="p">{</span>  
    <span class="nx">login</span><span class="p">();</span>
<span class="p">}</span>

<span class="nx">conected</span> <span class="o">&amp;&amp;</span> <span class="nx">login</span><span class="p">();</span>  
</code></pre></div> <h2 id="でdefault-valueを設定する">
<code class="highlighter-rouge">||</code>でDefault valueを設定する</h2> <p>変数の値の指定がない場合のみ、Default valueが設定されるようになる。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">User</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="s2">"Default User"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span> <span class="o">||</span> <span class="s2">"Default age 27"</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">user1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">();</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user1</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> 
<span class="c1">// Default User  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user1</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span> 
<span class="c1">// Default age 27</span>

<span class="kd">var</span> <span class="nx">user2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">User</span><span class="p">(</span><span class="s2">"Barry Allen"</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user2</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> 
<span class="c1">// Barry Allen  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">user2</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span> 
<span class="c1">// 25  </span>
</code></pre></div> <h2 id="arraylengthをキャッシュする">array.lengthをキャッシュする</h2> <p><code class="highlighter-rouge">for</code>で繰り返し処理を行う度に<code class="highlighter-rouge">array.length</code>をしないようにする。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">startTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">endTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">endTime</span> <span class="o">-</span> <span class="nx">startTime</span> <span class="o">+</span> <span class="s2">"ms"</span><span class="p">);</span>
</code></pre></div> <h2 id="html要素を取得する">HTML要素を取得する</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="s1">'querySelector'</span> <span class="k">in</span> <span class="nb">document</span><span class="p">)</span> <span class="p">{</span>  
    <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#id"</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"id"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div> <p>ちなみに<code class="highlighter-rouge">querySelector(".className")</code>は最初の要素の値を返すので、 複数の要素を取得したい場合は<code class="highlighter-rouge">getElementsByClassName</code>を使用する。</p> <h2 id="配列の最後を取得する">配列の最後を取得する</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">];</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">));</span> 
<span class="c1">// [6]  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">));</span> 
<span class="c1">// [5,6]  </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">));</span> 
<span class="c1">// [4,5,6]  </span>
</code></pre></div> <h2 id="配列を切捨てる">配列を切捨てる</h2> <p><code class="highlighter-rouge">array.length</code>の値を必要な長さに調整する。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">];</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> 
<span class="c1">// 6  </span>
<span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">);</span> 
<span class="c1">// [1,2,3]  </span>
</code></pre></div> <h2 id="ヒットしたものを全て入れ替える">ヒットしたものを全て入れ替える</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">string</span> <span class="o">=</span> <span class="s2">"john john"</span><span class="p">;</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/hn/g</span><span class="p">,</span> <span class="s2">"Replaced"</span><span class="p">));</span> 
<span class="c1">// "joReplaced joReplaced"  </span>
</code></pre></div> <h2 id="配列をマージする">配列をマージする</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">array1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">];</span>  
<span class="kd">var</span> <span class="nx">array2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">];</span>  
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array1</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">array2</span><span class="p">));</span> 
<span class="c1">// [1, 2, 3, 4, 5, 6]; </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array2</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">array1</span><span class="p">));</span> 
<span class="c1">// [4, 5, 6, 1, 2, 3]</span>
</code></pre></div> <h2 id="nodelistをarrayに変換する">NodeListをArrayに変換する</h2> <p>変換するとArrayのメソッドを使えるようになる。</p> <h4 id="nodelist-object">NodeList Object</h4> <p>DOMノードの集合を表すオブジェクトであり、<code class="highlighter-rouge">Node.childNodes</code>や<code class="highlighter-rouge">document.querySelectorAll</code>の戻り値として用いられる。</p> <h4 id="arrayfrom">Array.from()</h4> <p>配列型オブジェクトや反復可能(iterable)オブジェクトから新しいArrayインスタンスを生成</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">"p"</span><span class="p">);</span> 
<span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">elements</span><span class="p">)</span>
<span class="c1">// false</span>

<span class="kd">var</span> <span class="nx">after1</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">elements</span><span class="p">);</span> 
<span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">after1</span><span class="p">)</span>
<span class="c1">// true</span>

<span class="kd">var</span> <span class="nx">after2</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">elements</span><span class="p">);</span> 
<span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">after2</span><span class="p">)</span>
<span class="c1">// true</span>
</code></pre></div> <h2 id="配列をシャッフルする">配列をシャッフルする</h2> <h3 id="arraysort">Array.sort()</h3> <ol> <li>0未満の場合、a を b より小さい添字にソート</li> <li>0を返す場合、a と b は互いに関して変えることなく、他のすべての要素に関してソート</li> <li>0より大きい場合、b を a より小さい添字にソートMath.random()は0~1の値を返す。</li> </ol> <p>Math.random()が0.5より小さい場合、returnされる値が0未満になるため配列の前に来る。 Math.random()が0.5より大きい場合、returnされる値が0以上になるため配列の後ろに来る。</p> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="s2">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">""</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">shuffle</span><span class="p">(</span><span class="nx">array</span><span class="p">){</span>
	<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>  
    	<span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.5</span> 
	<span class="p">}))</span>
<span class="p">}</span>

<span class="nx">shuffle</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span>
</code></pre></div> <h2 id="配列の中に特定の値があるかどうか確かめる">配列の中に特定の値があるかどうか確かめる</h2> <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">months</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'January'</span><span class="p">,</span> <span class="s1">'March'</span><span class="p">,</span> <span class="s1">'July'</span><span class="p">];</span>  
<span class="nx">months</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'March'</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> 
<span class="c1">// true  </span>
<span class="nx">months</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="s1">'July'</span><span class="p">);</span>
<span class="c1">// true</span>
</code></pre></div> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="https://sunoko.github.io/whoarewe/tags/#javascript" title="Pages tagged javascript" class="tag"><span class="term">javascript</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=https://sunoko.github.io/whoarewe/javascript-tricks-1/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Share</span> </a> <a href="https://twitter.com/intent/tweet?text=https://sunoko.github.io/whoarewe/javascript-tricks-1/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=https://sunoko.github.io/whoarewe/javascript-tricks-1/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> </header> <!-- JS --> <script src="https://sunoko.github.io/whoarewe/assets/js/jquery-1.12.0.min.js"></script> <script src="https://sunoko.github.io/whoarewe/assets/js/jquery.dlmenu.min.js"></script> <script src="https://sunoko.github.io/whoarewe/assets/js/jquery.goup.min.js"></script> <script src="https://sunoko.github.io/whoarewe/assets/js/jquery.magnific-popup.min.js"></script> <script src="https://sunoko.github.io/whoarewe/assets/js/jquery.fitvid.min.js"></script> <script src="https://sunoko.github.io/whoarewe/assets/js/scripts.js"></script> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
